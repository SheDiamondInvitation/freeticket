<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SheDiamond â€” Free Ticket</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

  <style>
    /* Reset & base */
    :root{
      --bg1: #0b0b0b;
      --bg2: #1a120b;
      --gold: #d4af37;
      --muted: rgba(255,255,255,0.92);
      --accent: #ffd77a;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg1),#120a05);overflow:hidden;font-family:"Poppins",system-ui,Arial;}
    a{color:inherit}

    /* Container that occupies viewport; no scroll */
    .stage{width:100vw;height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;position:relative;overflow:hidden;}

    /* Slider area fits exactly viewport minus ticket area height */
    .viewport {
      width:100vw;
      height: calc(100vh - 120px); /* leave room for fixed ticket box */
      overflow:hidden;
      display:block;
    }

    .slider {
      display:flex;
      height:100%;
      transition: transform 1s cubic-bezier(.22,.9,.3,1);
      will-change: transform;
    }

    .slide {
      flex:0 0 100%;
      height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 28px;
    }

    .slide-inner{
      width:100%;
      max-width:1200px;
      display:flex;
      gap:28px;
      align-items:center;
      justify-content:space-between;
      padding: 12px;
    }

    .slide-image{
      width:48%;
      border-radius:16px;
      overflow:hidden;
      box-shadow: 0 18px 40px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
      min-height:320px;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .slide-image img{width:100%;height:100%;object-fit:cover;display:block}

    .slide-text{
      width:48%;
      color:var(--muted);
      padding: 12px 18px;
    }
    .slide-text h2{
      font-family:'Playfair Display', serif;
      color:var(--gold);
      font-size:2.4rem;
      margin-bottom:12px;
      letter-spacing:.4px;
    }
    .slide-text p{
      color: #e9e6e0;
      font-size:1.05rem;
      line-height:1.6;
    }

    /* Fixed ticket & CTA box - centered bottom */
    .ticket-box{
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      bottom: 20px;
      z-index: 1000;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:10px;
      background: linear-gradient(180deg, rgba(20,14,10,0.7), rgba(8,6,4,0.5));
      padding: 12px 18px;
      border-radius: 14px;
      border: 1px solid rgba(212,175,55,0.12);
      backdrop-filter: blur(6px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.6);
      min-width:260px;
    }

    .ticket-count{
      font-family: 'Orbitron', monospace;
      font-size: 2rem;
      color: var(--gold);
      padding: 6px 14px;
      border-radius: 10px;
      border: 1px solid rgba(212,175,55,0.12);
      text-shadow: 0 6px 18px rgba(212,175,55,0.12);
      min-width:200px;
      text-align:center;
      background: rgba(0,0,0,0.25);
    }

    .ticket-note{
      font-size:0.85rem;
      color:#d8caa1;
      opacity:0.95;
      margin-top:2px;
      text-align:center;
    }

    .chat-btn{
      background:linear-gradient(180deg,var(--gold),#b9922a);
      color:#0a0400;
      border:none;
      padding:10px 20px;
      border-radius:28px;
      font-weight:600;
      cursor:pointer;
      box-shadow: 0 14px 30px rgba(212,175,55,0.12);
      transition: transform .12s ease, box-shadow .12s ease;
      font-size:1rem;
      min-width:220px;
    }
    .chat-btn:active{ transform: translateY(1px); box-shadow:0 8px 18px rgba(0,0,0,0.4) }

    /* No horizontal or vertical scroll anywhere */
    html,body,.stage,.viewport{overflow:hidden}

    /* Mobile styles: stack image above text */
    @media (max-width: 820px) {
      .slide-inner{flex-direction:column;justify-content:flex-start;align-items:center;padding-top:18px}
      .slide-image{width:92%;min-height:240px}
      .slide-text{width:92%;margin-top:8px;padding:0 6px;text-align:center}
      .slide-text h2{font-size:1.5rem}
      .slide-text p{font-size:0.98rem}
      .ticket-box{min-width:86%;right:0;left:50%;transform:translateX(-50%);padding:12px}
      .ticket-count{font-size:1.6rem}
    }
  </style>
</head>
<body>
  <div class="stage" role="main" aria-label="SheDiamond landing page">

    <!-- Viewport for slides -->
    <div class="viewport" aria-hidden="false">
      <div class="slider" id="slider">

        <!-- Slide 1 -->
        <section class="slide" aria-label="About">
          <div class="slide-inner">
            <div class="slide-image"><img src="image1.jpg" alt="About SheDiamond image"></div>
            <div class="slide-text">
              <h2>About SheDiamond</h2>
              <p>SheDiamond is a movement that empowers women to build financial freedom, lead with confidence and create lasting impact. We run mentorships, workshops and community experiences tailored for ambitious women.</p>
            </div>
          </div>
        </section>

        <!-- Slide 2 -->
        <section class="slide" aria-label="Mission">
          <div class="slide-inner">
            <div class="slide-image"><img src="image2.jpg" alt="Mission image"></div>
            <div class="slide-text">
              <h2>Mission</h2>
              <p>To raise 5,000 financially free women who will build, lead and use their resources to change lives and communities for the better through skills, mentorship and action.</p>
            </div>
          </div>
        </section>

        <!-- Slide 3 -->
        <section class="slide" aria-label="Conveyor">
          <div class="slide-inner">
            <div class="slide-image"><img src="image3.jpg" alt="Conveyor image"></div>
            <div class="slide-text">
              <h2>Conveyor of SheDiamond</h2>
              <p>Led by experienced mentors and industry professionals, SheDiamond provides practical training, accountability and community support so women can scale their dreams into reality.</p>
            </div>
          </div>
        </section>

        <!-- Slide 4 -->
        <section class="slide" aria-label="Next Event">
          <div class="slide-inner">
            <div class="slide-image"><img src="image4.jpg" alt="Next Event image"></div>
            <div class="slide-text">
              <h2>Next SheDiamond Event</h2>
              <p>Join our next in-person gathering for inspiration, practical trainings and networking â€” come ready to learn, meet new partners and claim your free ticket.</p>
            </div>
          </div>
        </section>

      </div><!-- .slider -->
    </div><!-- .viewport -->

    <!-- Fixed ticket + CTA -->
    <div class="ticket-box" role="region" aria-label="Ticket and chat">
      <div id="ticketCount" class="ticket-count" aria-live="polite">Loadingâ€¦</div>
      <div class="ticket-note">Limited free tickets available</div>
      <button id="chatBtn" class="chat-btn" aria-label="Chat to get free ticket">ðŸ’¬ Chat to Get Free Ticket</button>
    </div>

  </div><!-- .stage -->

  <!-- Scripts -->
  <script>
  /* ========== SITE BEHAVIOR ========== */
  (function(){
    // --- CONFIG ---
    const SLIDE_INTERVAL_MS = 7000;
    const WHATSAPP_LINK = "https://chat.whatsapp.com/BuiGgo5ps9b2EZXimQZsJS"; // update if needed
    const STARTING_TICKETS = 50;   // initial shown to users
    const RESET_TO = 37;           // when hits 0, reset to this
    const FIREBASE_CONFIG = {
      // <-- If you add Firebase config later, replace these placeholder keys with your real values.
      // Leave empty or remove to use local fallback mode.
      apiKey: "", authDomain: "", databaseURL: "", projectId: "", storageBucket: "", messagingSenderId: "", appId: ""
    };

    // --- DOM ---
    const slider = document.getElementById('slider');
    const ticketCountEl = document.getElementById('ticketCount');
    const chatBtn = document.getElementById('chatBtn');

    // --- SLIDER AUTO PLAY (no scroll) ---
    let slideIndex = 0;
    const slideCount = slider.children.length;
    function goTo(i){
      slideIndex = (i + slideCount) % slideCount;
      slider.style.transform = `translateX(-${slideIndex * 100}%)`;
    }
    let slideTimer = setInterval(()=> goTo(slideIndex+1), SLIDE_INTERVAL_MS);

    // pause on touch/hover to be friendly
    ['mouseenter','touchstart'].forEach(evt => {
      slider.addEventListener(evt, ()=> clearInterval(slideTimer));
    });
    ['mouseleave','touchend'].forEach(evt => {
      slider.addEventListener(evt, ()=> slideTimer = setInterval(()=> goTo(slideIndex+1), SLIDE_INTERVAL_MS));
    });

    /* ========== Firebase realtime or local fallback ==========
       - If FIREBASE_CONFIG contains apiKey and databaseURL, the script attempts realtime mode.
       - Otherwise it falls back to localStorage per-device mode.
    */
    const firebaseConfigured = FIREBASE_CONFIG.apiKey && FIREBASE_CONFIG.databaseURL;

    // Local fallback state
    let localTickets = parseInt(localStorage.getItem('sd_tickets'),10);
    if (isNaN(localTickets)) {
      localTickets = STARTING_TICKETS;
      localStorage.setItem('sd_tickets', localTickets);
    }
    let localClicked = localStorage.getItem('sd_clicked') === '1';

    // render helper
    function renderLocal(){
      ticketCountEl.textContent = `${localTickets} Tickets Left`;
    }
    renderLocal();

    if (!firebaseConfigured) {
      // LOCAL MODE
      console.info("SheDiamond: running in LOCAL fallback mode (no Firebase configured). Add Firebase config to enable realtime.");
      chatBtn.addEventListener('click', () => {
        if (!localClicked) {
          localTickets = localTickets - 1;
          if (localTickets <= 0) localTickets = RESET_TO;
          localStorage.setItem('sd_tickets', localTickets);
          localStorage.setItem('sd_clicked', '1');
          renderLocal();
        }
        // open whatsapp reliably
        const win = window.open(WHATSAPP_LINK, '_blank', 'noopener,noreferrer');
        if (win) win.focus();
      });
    } else {
      // FIREBASE MODE (realtime)
      (async function initFirebaseRealtime(){
        try {
          // dynamic import to avoid errors if not allowed
          const [{ initializeApp }, { getDatabase, ref, onValue, runTransaction }] = await Promise.all([
            import('https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js'),
            import('https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js')
          ]);

          const app = initializeApp(FIREBASE_CONFIG);
          const db = getDatabase(app);
          const ticketsRef = ref(db, 'tickets');

          // Listen for live updates
          onValue(ticketsRef, snap => {
            const v = snap.val();
            // if database is empty, initialize to STARTING_TICKETS
            if (v === null || typeof v === 'undefined') {
              // set once using transaction to avoid race
              runTransaction(ticketsRef, cur => cur === null ? STARTING_TICKETS : cur);
              return;
            }
            ticketCountEl.textContent = `${v} Tickets Left`;
          });

          // Click behaviour uses transaction to decrement atomically
          chatBtn.addEventListener('click', () => {
            const clicked = localStorage.getItem('sd_clicked') === '1';
            if (!clicked) {
              runTransaction(ticketsRef, current => {
                if (current === null) return STARTING_TICKETS - 1;
                const next = current - 1;
                return next <= 0 ? RESET_TO : next;
              }).catch(err => console.error("Transaction failed:", err));
              localStorage.setItem('sd_clicked', '1');
            }
            const win = window.open(WHATSAPP_LINK, '_blank', 'noopener,noreferrer');
            if (win) win.focus();
          });

        } catch (err) {
          console.error("Firebase failed to load â€” falling back to local mode.", err);
          // fallback to local
          chatBtn.addEventListener('click', () => {
            if (!localClicked) {
              localTickets = localTickets - 1;
              if (localTickets <= 0) localTickets = RESET_TO;
              localStorage.setItem('sd_tickets', localTickets);
              localStorage.setItem('sd_clicked', '1');
              renderLocal();
            }
            const win = window.open(WHATSAPP_LINK, '_blank', 'noopener,noreferrer');
            if (win) win.focus();
          });
        }
      })();
    }

    // Extra: keep local display synced with Firebase changes if user already has local state
    // (if in local mode, renderLocal already in place)
    // If Firebase is later added, realtime listener will update display.

    // Prevent any accidental scroll via keyboard (for strict single-page)
    window.addEventListener('keydown', e => {
      if (['ArrowUp','ArrowDown','PageUp','PageDown','Home','End',' '].includes(e.key)) {
        e.preventDefault();
      }
    }, {passive:false});
  })();
  </script>
</body>
</html>
